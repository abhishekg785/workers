<html>
    <head>
        <title>Without woker</title>
    </head>
    <body>
        <div class="x"></div>
    </body>
    <script type="text/plain" id="workerjs">
        function pause(ms) {
            const time = new Date();
            while((new Date()) - time < ms) {}
        }

        self.addEventListener('message', (e) => {
            if (e.data == "compute") {
                pause(1000);

                self.postMessage('compute done');
            }
        });
    </script>
    <script>
        const workerjs = document.getElementById('workerjs');
        const blob = new Blob([workerjs.innerText]);
        const blobUrl = window.URL.createObjectURL(blob);
        // create a new worker
        const worker = new Worker(blobUrl);
        worker.postMessage("compute")

        worker.addEventListener('message', (e) => {
            console.log('message from worker', e);
        });

        document.getElementsByClassName('x')[0].innerHTML = "hello";
    </script>
</html>
